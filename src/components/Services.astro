---
import { Image } from 'astro:assets';
import servicesTitleImg from '../assets/SERVICIOS.png';

import estrategiaImg from '../assets/cm-new-4.png';
import disenoImg from '../assets/rumbo-design.jpg';
import publicidadImg from '../assets/deporte.jpg';
import videoImg from '../assets/videoclip.jpg';
import fotografiaImg from '../assets/perfume.jpg';
import desarrolloImg from '../assets/mizar-techline.jpg';

const services = [
  {
    title: "ESTRATEGIA DE CONTENIDO",
    id: "01",
    color: "bg-[#774F4F]",
    img: estrategiaImg,
    tags: ["Social Media", "Planificación", "Engagement"],
  },
  {
    title: "DISEÑO GRÁFICO Y BRANDING",
    id: "02",
    color: "bg-[#774F4F]",
    img: disenoImg,
    tags: ["Identidad Visual", "Branding", "Creatividad"],
  },
  {
    title: "PUBLICIDAD (ADS)",
    id: "03",
    color: "bg-[#774F4F]",
    img: publicidadImg,
    tags: ["Meta Ads", "Google Ads", "Conversión"],
  },
  {
    title: "EDICIÓN DE VIDEO",
    id: "04",
    color: "bg-[#774F4F]",
    img: videoImg,
    tags: ["Reels", "Videoclips", "Motion"],
  },
  {
    title: "FOTOGRAFÍA",
    id: "05",
    color: "bg-[#774F4F]",
    img: fotografiaImg,
    tags: ["Producto", "Lifestyle", "Editorial"],
  },
  {
    title: "DESARROLLO WEB",
    id: "06",
    color: "bg-[#774F4F]",
    img: desarrolloImg,
    tags: ["Landing Pages", "E-commerce", "Apps"],
  },
];
---

<section id="services" class="w-full bg-[#E0D7D3] mt-20 px-4 lg:px-8 lg:max-w-[1600px] lg:mx-auto lg:mt-24 py-20">
  <div class="flex justify-center mb-4 lg:mb-8">
    <Image 
      src={servicesTitleImg}
      alt="Nuestros Servicios" 
      class="w-full h-auto lg:max-w-4xl"
      loading="eager" 
    />
  </div>

  <div class="relative flex flex-col items-center gap-6 pb-24 lg:gap-8 lg:pb-32">
    {
      services.map((service, index) => (
        <article
          class={`service-card sticky w-full rounded-[32px] p-6 lg:p-8 flex flex-col justify-between ${service.color} overflow-hidden`}
          style={{
            top: `calc(80px + ${index * 30}px)`,
          }}
        >
          <div class="inset-border"></div>

          <div class="relative z-10 flex flex-col justify-between h-full lg:flex-row lg:items-center lg:gap-8">
            <div class="lg:flex-1">
              <div class="flex justify-between items-start lg:flex-col lg:gap-2">
                <h3 class="text-2xl lg:text-3xl xl:text-4xl text-[#EDE8E3] font-bold leading-tight w-3/4 lg:w-full"
                    style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);">
                  {service.title}
                </h3>
                <span class="text-3xl lg:text-4xl xl:text-5xl text-[#EDE8E3] font-arialnova lg:order-first"
                      style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);">{service.id}</span>
              </div>

              <div class="flex flex-wrap gap-2 mt-3 lg:mt-4">
                {service.tags.map((tag: string) => (
                  <span class="glass-tag px-3 py-1 lg:px-4 lg:py-1.5 text-xs lg:text-sm font-medium text-[#EDE8E3] rounded-full">
                    {tag}
                  </span>
                ))}
              </div>
            </div>

            <div class="h-40 lg:h-56 xl:h-64 w-full lg:w-80 xl:w-96 rounded-2xl overflow-hidden my-4 lg:my-0 shadow-lg lg:flex-shrink-0">
              <Image
                src={service.img}
                class="w-full h-full object-cover"
                alt={service.title}
              />
            </div>

            <button class="glass-button lg:hidden px-6 py-3 rounded-full font-semibold self-start text-sm text-[#EDE8E3] transition-all duration-300">
              Ver más
            </button>
          </div>
        </article>
      ))
    }
  </div>
</section>

<style>
  .inset-border {
    position: absolute;
    inset: 4px;
    border-radius: 28px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    pointer-events: none;
    z-index: 2;
  }

  .glass-tag {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
    transition: all 0.3s ease;
  }

  .glass-tag:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.35);
    transform: translateY(-1px);
  }

  .glass-button {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .glass-button:hover {
    background: rgba(255, 255, 255, 0.25);
    border-color: rgba(255, 255, 255, 0.4);
    box-shadow: 
      0 8px 24px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
  }

  .service-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.05),
      transparent
    );
    transition: left 0.6s ease;
    z-index: 3;
    pointer-events: none;
    border-radius: inherit;
  }

  .service-card:hover::before {
    left: 100%;
  }
</style>
